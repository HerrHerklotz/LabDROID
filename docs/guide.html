<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-79377017-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-79377017-2');
  </script>
  <title>LabDroid Documentation</title>
  <link href="https://fonts.googleapis.com/css?family=Poppins|Montserrat" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
  <link rel="icon" href="LabDroid/favicon.ico" type="image/x-icon" />
  <style>
    body {
      height: 100vh;
      background-color: #eeeeee;
    }

    body > header {
      position: fixed;
      width: 280px;
      height: 260px;
      z-index: 1;

      box-sizing: border-box;
      padding: 10px 5px;
      background-color: #3872a2;
      color: #ffffff;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
    }

    body > header > img {
      width: 128px;
      align-self: center;
    }

    body > header > button {
      background: unset;
      border: 1px solid #ffffff;
      color: #ffffff;
      width: 48px;
      height: 48px;
      cursor: pointer;
      margin-right: 10px;
      display: none;
    }

    body > aside {
      position: fixed;
      top: 260px;
      bottom: 0;
      width: 280px;
      z-index: 1;
      
      box-sizing: border-box;
      background-color: #43434b;
      display: flex;
      flex-direction: column;
      line-height: 1.25em;
      color: #b2b2b2;
    }

    body > aside > a {
      text-decoration: none;
      color: #e2e2e2;
    }

    body > aside > * {
      padding: 2px 2px;
    }

    body > aside > label:not(:first-child) {
      margin-top: 10px;
    }

    body > main {
      position: absolute;
      left: 280px;
      max-width: 720px;

      background-color: #ffffff;
      box-sizing: border-box;
      overflow-y: auto;
      padding: 10px;
    }

    body > main > section {
      display: none;
    }


    @media (max-width: 600px) {
      body > header {
        width: 100vw;
        height: 96px;
        flex-direction: row;
        justify-content: flex-start;
        align-items: center;
      }

      body > header > img {
        display: none;
      }

      body > header > button {
        display: unset;
      }

      body > header > h2 {
        display: none;
      }

      body > aside {
        top: 96px;
        width: 100vw;
        display: none;
      }

      body > aside > * {
        padding: 10px;
      }

      body > main {
        top: 96px;
        left: 0;
      }
    }
  </style>
</head>
<body onresize="resize()">
  <header>
    <img src="assets/images/logo.png" />
    <button onclick="toggle()">M</button>
    <h1>LabDroid</h1>
    <h2>Documentation</h2>
  </header>
  <aside>
    <label>Basics</label>
    <a id="basics_ide_link" href="?page=basics_ide">IDE</a>
    <label>Software Nodes</label>
    <a id="nodes_script_link" href="?page=nodes_script">Script</a>
    <label>Hardware Nodes</label>
    <a id="nodes_accelerometer_link" href="?page=nodes_accelerometer">Accelerometer</a>
    <a id="nodes_gps_link" href="?page=nodes_gps">GPS</a>
    <a id="nodes_gyroscope_link" href="?page=nodes_gyroscope">Gyroscope</a>
    <a id="nodes_magnetometer_link" href="?page=nodes_magnetometer">Magnetometer</a>
    <a id="nodes_nfc_link" href="?page=nodes_nfc">NFC</a>
    <a id="nodes_vibrator_link" href="?page=nodes_vibrator">Vibrator</a>
    <label>Communication Nodes</label>
    <a id="nodes_websocket_link" href="?page=nodes_websocket">WebSocket</a>
  </aside>
  <main>
    <section id="basics_ide">
      <h1>IDE</h1>
      <h2>Access</h2>
      <div>
        <div>
          <p>LabDroid is shipped with an inbuild IDE based on web technologies. This allows you to prepare your projects from your PC, MAC or any
          other platform which supports Google Chrome. Of course you can also try to use Firefox or any other browser but at the moment it's
          impossible for me to check all browsers. If possible please use the latest version of Google Chrome or Chromium.</p>
          <p>To get started you first need to activate the LabDroid service through the toggle in the top right corner.</p>
          <img src="assets/images/activate_service.jpg" width="75%" />
          <p>
          After this you should get a notification which shows your the URL (http://PHONE_IP:8080) to open the IDE. Just open this page on 
          another device which is in the same network.
          </p>
          <img src="assets/images/ide.png" width="100%" />
        </div>
      </div>
      <h2>Your first project</h2>
      <div>

      </div>
      <h2>Next steps</h2>
      <div>
        <p>
          Now you are able to start using LabDroid. Further information about the nodes can be founded on this page. Just select the section
          of your interest on the left side.
        </p>
      </div>
    </section>


    <section id="nodes_script">
      <h1>Script Node</h1>
      <h2>Basics</h2>
        <section>
          <p>
            LabDroid provides a script node which is powered by V8 from Google. Before we start with the technical things I would like to give 
            some credits to Ian Bull the founder of J2V8: Great job! :)<br /><br />
    
            With the help of J2V8 you get a full-size JavaScript interpreter which is even optimized for Android. Beside of the API extensions 
            LabDroid offers you can get use of all inbuild namespaces like Date, JSON, Math, RegExp and much <a 
            href="https://www.w3schools.com/js/" target="_blank">more</a>.<br /><br />
            For LabDroid I implemented some additional functions which will be explained in the following section.
          </p>
        </section>
      <h2>API</h2>
      <section>
          <div>
          <label><span class="type">any</span> <b>$in</b>(port: <span class="type">number</span>)</label>
          <p>Receives an object via the input port from the conected node.</p>
          <table>
            <th>
              Parameters
            </th>
            <tr>
              <td>port</td>
              <td>The number to address the wanted input port. Starting from 0 for the first one.</td>
            </tr>
          </table>
          <table>
            <th>
              Returns
            </th>
            <tr>
              <td>any</td>
              <td>The object which was received through the corresponding input port.</td>
            </tr>
          </table>
        </div>
        <div>
          <label><span class="type">void</span> $out(port: <span class="type">number</span>, object: <span class="type">any</span>)</label>
          <p>Send an object via the output port to the connected node.</p>
          <table>
            <th>
              Parameters
            </th>
            <tr>
              <td>port</td>
              <td>The number to address the wanted output port. Starting from 0 for the first one.</td>
            </tr>
            <tr>
              <td>object</td>
              <td>The data you like to send out. It's possobile to place any kind of data (e.g. string, number, array or a object).</td>
            </tr>
          </table>
        </div>
        <div>
          <label><span class="type">void</span> $sleep(time: <span class="type">number</span>)</label>
          <p>Enables you to pause the script node for some time.</p>
          <table>
            <th>
              Parameters
            </th>
            <tr>
              <td>time</td>
              <td>A number to force the script node to sleep/wait for the desired time (milliseconds).</td>
            </tr>
          </table>
        </div>
        <div>
          <label><span class="type">number</span> $getNano()</label>
          <p>Returns the current system time of your phone, in nanoseconds.</p>
        </div>
      </section>
    </section>


    <section id="nodes_nfc">
      <h1>NFC Node</h1>
      <h2>Basics</h2>
        <section>
          <p>
            NFC is a technologies which allows you to identify an object. Many 
            plastic cards e.g. library card, public transport card, ..) are 
            equiped with an RFID tag, which can be read out through this node.
          </p>
        </section>
      <section>
        <h2>
          Output
        </h2>
        <table>
          <th>Port</th>
          <th>Object</th>
          <tr>
            <td>0</td>
            <td>
              A string which contains the RFID tag.<br />
            </td>
          </tr>
        </table>
      </section>
    </section>


    <section id="nodes_accelerometer">
      <h1>Accelerometer Node</h1>
      <h2>Basics</h2>
        <section>
          <p>
            The accelerometer reports the acceleration of the device along the 
            three sensor axes. The measured acceleration includes both the 
            physical acceleration (change of velocity) and the gravity.
          </p>
          <p>
            All values are in SI units [m/s^2] and measure the acceleration of 
            the device minus the force of gravity along the 3 sensor axes.
          </p>
        </section>
      <section>
        <h2>
          Output
        </h2>
        <table>
          <th>Port</th>
          <th>Object</th>
          <tr>
            <td>0</td>
            <td>
              {<br />
              &nbsp;&nbsp;"x": float <i>[m/s^2]</i>,<br />
              &nbsp;&nbsp;"y": float <i>[m/s^2]</i>,<br />
              &nbsp;&nbsp;"z": float <i>[m/s^2]</i><br />
              }
            </td>
          </tr>
        </table>
      </section>
    </section>

    <section id="nodes_gps">
      <h1>GPS Node</h1>
      <h2>Basics</h2>
        <section>
          <p>
            GPS is one kind of a Global Navigation Satellite System (GNSS). The 
            GPS node can be used to get the current position or speed of the 
            device. Once the module collects enough satellite data to calculate 
            an accurate position, it has a valid location (a fix ) that it can 
            report.
          </p>
          <p>
            Note: The first fix can take some time (up to a few minutes if the 
            device is indoor).
          </p>
        </section>
      <section>
        <h2>
          Output
        </h2>
        <table>
          <th>Port</th>
          <th>Object</th>
          <tr>
            <td>0</td>
            <td>
              {<br />
              &nbsp;&nbsp;"accuracy": float,<br />
              &nbsp;&nbsp;"altitude": float <i>[m]</i>,<br />
              &nbsp;&nbsp;"bearing": float <i>[deg]</i><br />
              &nbsp;&nbsp;"latitude": float<br />
              &nbsp;&nbsp;"longitude": float<br />
              &nbsp;&nbsp;"speed": float <i>[m/s]</i><br />
              }
            </td>
          </tr>
        </table>
      </section>
    </section>


    <section id="nodes_gyroscope">
      <h1>Gyroscope Node</h1>
      <h2>Basics</h2>
        <section>
          <p>
            The gyroscope reports the rate of rotation of the device around the 
            three sensor axes. Rotation is positive in the counterclockwise 
            direction (right-hand rule).
          </p>
          <p>
            All values are in radians per second (rad/s).
          </p>
        </section>
      <section>
        <h2>
          Output
        </h2>
        <table>
          <th>Port</th>
          <th>Object</th>
          <tr>
            <td>0</td>
            <td>
              {<br />
              &nbsp;&nbsp;"x": float <i>[rad/s]</i>,<br />
              &nbsp;&nbsp;"y": float <i>[rad/s]</i>,<br />
              &nbsp;&nbsp;"z": float <i>[rad/s]</i><br />
              }
            </td>
          </tr>
        </table>
      </section>
    </section>


    <section id="nodes_magnetometer">
      <h1>Magnetometer Node</h1>
      <h2>Basics</h2>
        <section>
          <p>
            The magnetometer is used to measure the ambient magnetic field. The 
            measurement is reported in the x, y and z fields.
          </p>
          <p>
            All values are in micro-Tesla (uT).
          </p>
        </section>
      <section>
        <h2>
          Output
        </h2>
        <table>
          <th>Port</th>
          <th>Object</th>
          <tr>
            <td>0</td>
            <td>
              {<br />
              &nbsp;&nbsp;"x": float <i>[uT]</i>,<br />
              &nbsp;&nbsp;"y": float <i>[uT]</i>,<br />
              &nbsp;&nbsp;"z": float <i>[uT]</i><br />
              }
            </td>
          </tr>
        </table>
      </section>
    </section>


    <section id="nodes_vibrator">
      <h1>Vibrator Node</h1>
      <h2>Basics</h2>
        <section>
          <p>
            The Vibrator is used to generate a haptic feedback. One of the most 
            common usage is to notifiy the user about new messages.
          </p>
        </section>
      <section>
        <h2>
          Input
        </h2>
        <p>
          This node supports default values. This means that you don't need to 
          send all parameters to the input. If one or more is missing the mode 
          will automatically use the default values.
        </p>
        <table>
          <th>Port</th>
          <th>Object</th>
          <tr>
            <td>0</td>
            <td>
              {<br />
              &nbsp;&nbsp;"power": float <i>[0.01-1.0 %]</i>,<br />
              &nbsp;&nbsp;"time": int <i>[1-1000 ms]</i><br />
              }
            </td>
          </tr>
        </table>
      </section>
    </section>


    <section id="nodes_websocket">
      <h1>WebSocket Server</h1>
    </section>

  </main>
  </main>
</body>
<script>
  const aside = document.getElementsByTagName('aside')[0];

  var gPage = location.search.split('page=')[1];

  if (!gPage) {
    gPage = 'basics_ide';
  }
 
  document.getElementById(gPage).style.display = 'unset';
  document.getElementById(gPage + '_link').style.backgroundColor = '#ffffff';
  document.getElementById(gPage + '_link').style.color = '#000000';


  function toggle() {
    console.log(aside.style.display)
    if (aside.style.display == 'flex') {
      aside.style.display = 'none';
      document.body.style.overflow = 'unset';
    } else {
      aside.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }
  }


  function resize() {
    if (document.body.clientWidth > 600) {
      aside.style.display = 'flex';
    } else {
      aside.style.display = 'none';
    }

    document.body.style.overflow = 'unset';
  }
</script>
</html>
